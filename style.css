:root{
  --bg:#f0f2f5;
  --card:#ffffff;
  --primary:#4e9cf6; 
  --primary-soft:#e3f0ff;
  --text:#1c1c1c;
  --muted:#8a8a8a;
  --border:#dadce0;
  --holiday:#37b19a;
  --ferie:#2ecc71;
  --permesso:#f59e0b;
  --font-system:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,sans-serif;
}

*, *::before, *::after{ box-sizing:border-box; }

html,body{
  margin:0; padding:0; height:100%;
  font-family:var(--font-system);
  background:var(--bg); color:var(--text);
}

body{ display:flex; flex-direction:column; }

/* HEADER */
.app-header{
  padding:8px 16px; background:#fff;
  display:flex; align-items:center; justify-content:space-between;
  box-shadow:0 1px 3px rgba(0,0,0,0.1); z-index:10;
}
.header-center{ text-align:center; }
.app-header h1{ margin:0; font-size:18px; color:var(--primary); }
.subtitle{ font-size:12px; color:var(--muted); }
.subtitle-small{ font-size:10px; color:var(--muted); }
.header-circle{ width:32px; height:32px; visibility:hidden; }

/* MAIN */
main{ flex:1; padding:12px; max-width:600px; margin:0 auto; width:100%; }

/* TOP BAR CALENDARIO */
.calendar-shell{ background:transparent; }

.cal-top{
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:4px;
}
.cal-nav{
  width:40px; height:40px;
  border-radius:50%; border:1px solid var(--border);
  background:#fff; color:#555; font-size:22px;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
  flex-shrink: 0;
}
.cal-month{
  flex-grow: 1; text-align:center;
  font-size:18px; font-weight:700; color:#333; text-transform:capitalize;
}
.cal-total-centered{
  text-align:center; font-size:13px; color:#666; font-weight:600;
  margin-bottom:12px;
}

/* WEEKDAYS */
.cal-weekdays{
  display:grid; grid-template-columns:repeat(7, 1fr);
  text-align:center; margin-bottom:6px;
}
.cal-weekdays > div{ font-size:11px; font-weight:600; color:#888; }

/* GRIGLIA */
#calendarGrid{
  display:grid; grid-template-columns:repeat(7, 1fr); gap:6px;
}

.cal-cell{
  background:#fff;
  border: 1px solid transparent;
  border-radius:8px; 
  min-height:85px; 
  padding:2px;
  display:flex; flex-direction:column;
  box-shadow:0 1px 2px rgba(0,0,0,0.05);
  position:relative;
  overflow:hidden;
}
.cal-cell.empty{ background:transparent; box-shadow:none; }

/* STILE OGGI */
.cal-cell.cal-today{
  background-color: #fff;
  border: 2px solid var(--primary);
  box-shadow: none;
}
.cal-day{
  font-size:14px; font-weight:600; color:#333;
  width:auto; height:auto; background:transparent !important;
}
.cal-today .cal-day {
  color: var(--primary) !important;
  font-weight: 700;
}

/* PILLOLE */
.cal-pill.holiday{
  background:var(--holiday); color:#fff;
  font-size:9px; font-weight:500;
  border-radius:3px; padding:2px 1px;
  text-align:center; line-height:1.1;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  margin-bottom:auto; width:100%;
}
.cal-pill.hours{
  background:var(--primary); color:#fff;
  font-size:14px; font-weight:700;
  border-radius:6px; margin-top:auto;
  padding:4px 0; text-align:center;
  width:100%; display:block;
}
.cal-pill.ferie{
  background:var(--ferie); color:#fff;
  font-size:13px; font-weight:700;
  border-radius:6px; margin-top:auto;
  padding:4px 0; text-align:center;
  width:100%; display:block;
}
.cal-pill.permesso{
  background:var(--permesso); color:#fff;
  font-size:13px; font-weight:700;
  border-radius:6px; margin-top:auto;
  padding:4px 0; text-align:center;
  width:100%; display:block;
}

/* CLICK */
.cal-cell:active{ transform:scale(0.98); }

/* MODAL */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999; display:flex; align-items:center; justify-content:center; padding:20px; }
.modal.hidden{ display:none !important; }
.modal-card{ width:100%; max-width:320px; background:#fff; border-radius:12px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
.modal-card h3{ margin:0 0 20px; font-size:18px; text-align:center; }
.deriv-spinner{ display:flex; align-items:center; justify-content:space-between; margin-bottom:24px; }
.deriv-value{ font-size:48px; font-weight:700; color:var(--primary); }
.deriv-arrow{ width:50px; height:50px; border-radius:50%; background:#f0f7ff; color:var(--primary); border:none; font-size:24px; font-weight:bold; }
.modal-actions{ display:flex; gap:10px; }
.btn{ flex:1; padding:12px; border-radius:8px; border:none; font-weight:600; font-size:16px; }
.btn.primary{ background:var(--primary); color:#fff; }
.btn.secondary{ background:#eee; color:#333; }
